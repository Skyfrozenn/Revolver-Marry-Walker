<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Постеры</title>
</head>
<h1>Revolver Marry Walker </h1>
 
<a href="{{url_for('home_page')}}">Выйти</a><br><br>
<a href="{{url_for('profile')}}">Мой профиль</a><br><br>
Статистика<br><br>
<a href="{{url_for('all_category')}}">Другие товары</a> <br><br><br><br>
Корзина
<hr>

<body>

    {% if all_products %}

        {% for tovars in all_products  | sort(attribute='date_add', reverse=True)  %}
            <img class="photo" src="data:image/*;base64,{{ tovars.avatar }}" alt="Profile Picture" style="max-width: 300px; height: auto; display: block; margin-bottom: 20px;">
            <b>Название - {{tovars.title}}</b> <br><br>
            <b>Описание - {{tovars.description}}</b> <br><br>
            <b>Дата добавления - {{tovars.date_add}}</b> <br><br>
            <b>Цена - {{tovars.price}}р</b> <br><br>
            <b>Количество на складе - {{tovars.count}}</b> <br><br>
        

            {% set ns = namespace(count_cart = 0)  %}
            {%for cart_tovar in cart %}
                {% if cart_tovar.product_id == tovars.id %}
                    {% set ns.count_cart = cart_tovar.count %}
                {% endif %}
            {% endfor %}
        
            {% if ns.count_cart > 0 %} <!--Тут будет просто форма изменения количества товара на плюс или минус-->
                <button type="submit">-</button> Количество в корзине = {{ns.count_cart}} <button type="submit">+</button>
            {% else %}
                <button type="submit">Добавить в корзину</button>
            {% endif %}
            <hr>
            


 
        {% endfor %}
    {% else %}
        <b>Постеров пока нет!</b>
    {% endif %}
    

    
</body>
</html>

<!--title : Mapped[str]
    descriprion : Mapped[str]
    avatar : Mapped[str] = mapped_column( nullable = True)
    date_add : Mapped[datetime] = mapped_column(server_default = func.now())
    price : Mapped[int]
    count : Mapped[int] -->